<link href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
<div class="container">
  <div class="title"><h2>Leave a review</h2></div>

  <div class="review-form">
    <div class="container-stars">
      <% (1..5).each do |i| %>
        <i class="far fa-star rating_star" data-stars=<%= "#{i}" %> id=<%= "s#{i}" %>></i>
      <% end %>
    </div>

    <%= simple_form_for [ @booking, @review ] do |f| %>
        <%= f.hidden_field :rating, as: :integer, id: "stars", required: true, label:false, input_html: { placeholder: "Rating (1-5)" } %>
        <%= f.input :content, as: :text, label:false, input_html: { placeholder: "Let us know what you think :)" } %>
        <%= f.submit class: 'btn btn-primary', id: 'btn-review' %>
    <% end %>
  </div>
</div>


<script type="text/javascript">
  $(function() {
    $('.rating_star').click(function() {
      var star = $(this);
      var rating = $(this).attr('data-stars');
      var form_id = $(this).attr('id');

      for(i=1; i<=5; i++) {
        if( i<= rating) {
          $('#s'+i).removeClass('far fa-star').addClass('fas fa-star');
        } else {
          $('#s'+i).removeClass('fas fa-star').addClass('far fa-star');
        }
      }

      $('#stars').val(rating);
      console.log($('#stars').val());

    });
  });

</script>
